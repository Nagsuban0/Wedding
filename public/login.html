<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Login</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <h1>Login</h1>
  <div>
    <button id="showUserLoginBtn">User Login</button>
    <button id="showAdminLoginBtn">Admin Login</button>
  </div>

  <form id="loginForm">
    <label>Username:</label><br />
    <input type="text" id="username" required /><br />
    <label>Password:</label><br />
    <input type="password" id="password" required /><br />
    <button type="submit">Login</button>
  </form>

  <p id="message"></p>
  <p>
    Not registered? <a href="register.html">Create an account</a>
  </p>

  <script>
    let isAdminLogin = false;

    document.getElementById('showUserLoginBtn').onclick = () => {
      isAdminLogin = false;
      document.getElementById('message').textContent = 'User Login';
    };
    document.getElementById('showAdminLoginBtn').onclick = () => {
      isAdminLogin = true;
      document.getElementById('message').textContent = 'Admin Login';
    };

    document.getElementById('loginForm').onsubmit = async (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value.trim();
      const password = document.getElementById('password').value.trim();

      const url = isAdminLogin ? '/api/admin-login' : '/api/user-login';
      const res = await fetch(url, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ username, password }),
      });

      const data = await res.json();

      if (res.ok) {
        document.getElementById('message').textContent = 'Login successful!';
        if (isAdminLogin) {
          window.location.href = 'admin-dashboard.html';
        } else {
          window.location.href = 'user-dashboard.html';
        }
      } else {
        document.getElementById('message').textContent = data.message || 'Login failed';
      }
    };
  </script>
</body>
</html>
